{
  "$id": "tag",
  "definitions": {
    "id": {
      "$ref": "common#/definitions/string-id"
    },
    "visualID": {
      "type": "string",
      "sanitize": "mongo"
    },
    "description": {
      "type": "string",
      "sanitize": "mongo"
    },
    "active": {
      "type": "boolean",
      "sanitize": "mongo"
    },
    "issuer": {
      "type": "boolean",
      "sanitize": "mongo"
    },
    "default": {
      "type": "boolean",
      "sanitize": "mongo"
    },
    "limit": {
      "type": "object",
      "properties": {
        "limitKwhEnabled": {
          "type": "boolean",
          "sanitize": "mongo",
          "default": false
        },
        "limitKwh": {
          "type": "number",
          "sanitize": "mongo",
          "minimum": 0,
          "default": 0
        },
        "limitKwhConsumed": {
          "type": "number",
          "sanitize": "mongo",
          "minimum": 0,
          "default": 0
        },
        "changeHistory": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "lastChangedOn": {
                "type": "string",
                "format": "date-time",
                "customType": "date",
                "sanitize": "mongo",
                "nullable": true
              },
              "lastChangedBy": {
                "type": "string",
                "sanitize": "mongo"
              },
              "oldLimitKwh": {
                "type": "number",
                "sanitize": "mongo"
              },
              "oldLimitKwhConsumed": {
                "type": "number",
                "sanitize": "mongo"
              },
              "newLimitKwh": {
                "type": "number",
                "sanitize": "mongo"
              },
              "newLimitKwhConsumed": {
                "type": "number",
                "sanitize": "mongo"
              }
            }
          }
        }
      }
    },
    "userID": {
      "$ref": "user#/definitions/id"
    }
  }
}
